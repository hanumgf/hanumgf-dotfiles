;; -------------------
;;  power memu widget
;; -------------------

(defwindow powermenu
    :monitor 0
    :stacking "overlay"
    :geometry (geometry :anchor "center"
                        :x "0px"
                        :y "0px"
                        :width "100%"
                        :height "100%"
              )
    :wm-ignore true
    :namespace "eww-powerwd"
    (expander :expanded true
              (revealer :transition "crossfade"
                        :reveal powerrev
                        :duration "400ms"
                        (powermenu-container)
              )

    )
)

(defvar powerrev false)

(defwidget powermenu-container []
    (box :class "powermenu-container"
        (box :class "powermenu-box"
            :orientation "v"
            :spacing 15
            :space-evenly false
            :halign "center"
            :valign "center"
            ;; :cursor "pointer"
            (box :class "powermenu-block1"
                  :oritntation "h"
                  :spacing 15
                  :space-evenly false
                  :halign "center"
                  :valign "center"
                  (eventbox :class "powerbutton shutdown"
                            :cursor "pointer"
                            :onclick "cliphist wipe && systemctl poweroff"
                            ;; :tooltip "Shutdown"
                            (box :class "pwbutton" (label :text " "))
                  )
                  (eventbox :class "powerbutton logout"
                            :cursor "pointer"
                            :onclick "hyprctl dispatch exit"
                            ;; :tooltip "Logout"
                            (box :class "pwbutton" (label :text "󰍃 "))
                  )
                  (eventbox :class "powerbutton lock"
                            :cursor "pointer"
                            :onclick "./scripts/hyprlock.sh"
                            ;; :tooltip "Lock"
                            (box :class "pwbutton" (label :text " "))
                  )
            )
            (box :class "powermenu-block2"
                  :orientation "h"
                  :spacing 15
                  :space-evenly false
                  :halign "center"
                  :valign "center"
                  (eventbox :class "powerbutton reboot"
                            :cursor "pointer"
                            :onclick "systemctl reboot"
                            ;; :tooltip "Reboot"
                            (box :class "pwbutton" (label :text " "))
                  )
                  (eventbox :class "powerbutton sleep"
                            :cursor "pointer"
                            :onclick "systemctl suspend"
                            ;; :tooltip "Sleep"
                            (box :class "pwbutton" (label :text "󰒲 "))
                  )
                  (eventbox :class "powerbutton hibernate"
                            :cursor "pointer"
                            :onclick "systemctl hibernate"
                            ;; :tooltip "Hibernate"
                            (box :class "pwbutton" (label :text " "))
                  )
            )
            (eventbox :class "cancel"
                      :cursor "pointer"
                      :onclick "./scripts/powermenu.sh"
                      (label :text "Cancel")
            )
        )
    )
)


(defwidget power []
    (eventbox :cursor "pointer"
              :onclick "./scripts/powermenu.sh"
              :class "powermenu-bar"
              (box  :class "powermenu-label"
                    (label :text "󰐥")
              )
    )
)

